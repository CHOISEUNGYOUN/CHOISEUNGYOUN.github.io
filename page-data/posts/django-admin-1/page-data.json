{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/django-admin-1/","webpackCompilationHash":"5e1027a1f6f421551614","result":{"data":{"markdownRemark":{"id":"b4495b9e-0903-50bb-ae8d-72507e4c0b1b","html":"<p>오늘부터 Django 를 좀 더 자세히 공부 해보고자 Django의 기능을 하나하나 기록을 해보는 시간을 가져보고자 한다.\n우선 Django에서 가장 강력한 기능중에 하나인 Django admin에 대하여 차근차근히 알아보고자 한다.</p>\n<h3 id=\"1-modeladmin-class\"><a href=\"#1-modeladmin-class\" aria-label=\"1 modeladmin class permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ModelAdmin class</h3>\n<p>ModelAdmin 은 <code class=\"language-text\">admin.py</code> 에서 가장 기본적으로 사용 되어야 하는 클래스이며, <code class=\"language-text\">admin.py</code> 의 모든 클래스는 ModelAdmin 속성을 상속받아 작성되어야 한다.\n만약, admin의 기본 형테로만 사용을 하고 싶다면 굳이 사용하지 않아도 된다.</p>\n<h3 id=\"2-the-register-decorator\"><a href=\"#2-the-register-decorator\" aria-label=\"2 the register decorator permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. The register decorator</h3>\n<p>Register 데코레이터는 <code class=\"language-text\">admin.py</code> 내부의 각 클래스에 지정하여 해당 클래스를 admin 페이지에서 볼 수 있도록 설정하는 기능이다. 불러오는 형태는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>              <span class=\"token keyword\">import</span> models\n\n@admin<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Reservation<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ReservationAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span></code></pre></div>\n<p>위와 같은 형태로 <code class=\"language-text\">models.py</code>에 등록된 class를 지정하면 된다. 해당 데코레이터를 호출하지 않으면, admin 페이지에 model 데이터가 등록되지 않으니 유의하자.</p>\n<p>추가로, register 함수에는 site라는 인자가 있는데, 이 인자를 이용하면, 본인이 커스텀한 admin 페이지에 연결 할 수 있다.</p>\n<h3 id=\"3-modeladminlist_display\"><a href=\"#3-modeladminlist_display\" aria-label=\"3 modeladminlist_display permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ModelAdmin.list_display</h3>\n<p>list_display 는 <code class=\"language-text\">models.py</code> 에서 작성한 모델의 어느 필드값을 보여 줄 것인지 정해주는 속성이다. 튜플 또는 리스트로 작성이 되며, 기본 속성은 지정된 인덱스 순서대로 admin 페이지에 보여준다. 여기서 중요한 특징이 있는데 그 특징은 하기와 같다.</p>\n<h5 id=\"a-해당-필드가-foreignkey-라면-foreignkey-부모-필드의-str-속성에-지정된-값을-보여준다\"><a href=\"#a-%ED%95%B4%EB%8B%B9-%ED%95%84%EB%93%9C%EA%B0%80-foreignkey-%EB%9D%BC%EB%A9%B4-foreignkey-%EB%B6%80%EB%AA%A8-%ED%95%84%EB%93%9C%EC%9D%98-str-%EC%86%8D%EC%84%B1%EC%97%90-%EC%A7%80%EC%A0%95%EB%90%9C-%EA%B0%92%EC%9D%84-%EB%B3%B4%EC%97%AC%EC%A4%80%EB%8B%A4\" aria-label=\"a 해당 필드가 foreignkey 라면 foreignkey 부모 필드의 str 속성에 지정된 값을 보여준다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>a. 해당 필드가 ForeignKey 라면, ForeignKey 부모 필드의 <strong>str</strong> 속성에 지정된 값을 보여준다.</h5>\n<h5 id=\"b-manytomanyfield는-지원하지-않는다mtom-field에-대한-호출-쿼리가-다르기-때문-mtom-을-호출-하는-방법은-대부분-inner-join으로-이루어진다\"><a href=\"#b-manytomanyfield%EB%8A%94-%EC%A7%80%EC%9B%90%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4mtom-field%EC%97%90-%EB%8C%80%ED%95%9C-%ED%98%B8%EC%B6%9C-%EC%BF%BC%EB%A6%AC%EA%B0%80-%EB%8B%A4%EB%A5%B4%EA%B8%B0-%EB%95%8C%EB%AC%B8-mtom-%EC%9D%84-%ED%98%B8%EC%B6%9C-%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95%EC%9D%80-%EB%8C%80%EB%B6%80%EB%B6%84-inner-join%EC%9C%BC%EB%A1%9C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%84%EB%8B%A4\" aria-label=\"b manytomanyfield는 지원하지 않는다mtom field에 대한 호출 쿼리가 다르기 때문 mtom 을 호출 하는 방법은 대부분 inner join으로 이루어진다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>b. ManyToManyField는 지원하지 않는다.(MtoM Field에 대한 호출 쿼리가 다르기 때문. MtoM 을 호출 하는 방법은 대부분 inner join으로 이루어진다.)</h5>\n<h5 id=\"c-booleanfield-는-true-false-를-리턴하지-않고-o-x-로-렌더링-된다\"><a href=\"#c-booleanfield-%EB%8A%94-true-false-%EB%A5%BC-%EB%A6%AC%ED%84%B4%ED%95%98%EC%A7%80-%EC%95%8A%EA%B3%A0-o-x-%EB%A1%9C-%EB%A0%8C%EB%8D%94%EB%A7%81-%EB%90%9C%EB%8B%A4\" aria-label=\"c booleanfield 는 true false 를 리턴하지 않고 o x 로 렌더링 된다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>c. BooleanField 는 True, False 를 리턴하지 않고 O, X 로 렌더링 된다.</h5>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@admin<span class=\"token punctuation\">.</span>register</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Reservation<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ReservationAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token triple-quoted-string string\">\"\"\" Reservation Admin Definition \"\"\"</span>\n\n    list_display <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"room\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"status\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"check_in\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"check_out\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"guest\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"in_progress\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"is_finished\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"4-modeladminfieldsets\"><a href=\"#4-modeladminfieldsets\" aria-label=\"4 modeladminfieldsets permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ModelAdmin.fieldsets</h3>\n<p>필자가 생각하는 Django admin의 또 다른 장점인데, fieldssets 로 admin 페이지에서 각 섹션별로 보여 줄 데이터를 묶음으로 처리하여 보여준다. 딱딱 구분이 잘 되어있는 페이지를 보여주고 싶다면 반드시 사용해아 될 기능이라고 생각한다. 역시 튜플과 딕셔너리의 조합으로 만들어지며 형태는 하기와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@admin<span class=\"token punctuation\">.</span>register</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Room<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RoomAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token triple-quoted-string string\">\"\"\" Room Admin Definition \"\"\"</span>\n\n    inlines <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PhotoInline<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span>\n\n    fieldsets <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"Basic Info\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"description\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"country\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"city\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"address\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"room_type\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"Times\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"check_in\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"check_out\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"instant_book\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"Spaces\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"guests\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"beds\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"bedrooms\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"baths\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"More About Spaces\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"classes\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"collapse\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"amenities\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"facilities\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"house_rules\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"Last Details\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"host\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p>여기까지 기본적으로 데이터를 보여 줄 수 있는 형태를 알아보았으며, 다음 포스팅은 데이터 정렬, 필터링 및 MtoM 필드를 보여 줄 수 있는 기능들을 살펴보도록 하겠다.</p>\n<p>*Reference:\n<a href=\"https://docs.djangoproject.com/en/3.0/ref/contrib/admin/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">The Django admin site</a></p>","fields":{"slug":"/posts/django-admin-1/","tagSlugs":["/tag/django/","/tag/python/","/tag/django-admin/"]},"frontmatter":{"date":"2020-02-20T20:40:32.169Z","description":"Django admin 에 대해서 알아보자","tags":["Django","Python","Django admin"],"title":"Django admin-1"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/django-admin-1/"}}}